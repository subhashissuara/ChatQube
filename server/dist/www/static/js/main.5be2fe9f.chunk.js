(this.webpackJsonpchatqube=this.webpackJsonpchatqube||[]).push([[0],{11:function(e,t,n){(function(t,n){var a=parseInt(16777215*Math.random(),10),s=new RegExp("^[0-9a-fA-F]{24}$");try{if(t&&t.from)var r=!0}catch(g){r=!1}for(var i=function e(n){if(n instanceof e)return n;if(!(this instanceof e))return new e(n);if(this._bsontype="ObjectID",null==n||"number"===typeof n)return this.id=this.generate(n),void(e.cacheHexString&&(this.__id=this.toString("hex")));var a=e.isValid(n);if(!a&&null!=n)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(a&&"string"===typeof n&&24===n.length&&r)return new e(new t(n,"hex"));if(a&&"string"===typeof n&&24===n.length)return e.createFromHexString(n);if(null==n||12!==n.length){if(null!=n&&n.toHexString)return n;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=n,e.cacheHexString&&(this.__id=this.toString("hex"))},o=[],c=0;c<256;c++)o[c]=(c<=15?"0":"")+c.toString(16);i.prototype.toHexString=function(){if(i.cacheHexString&&this.__id)return this.__id;var e="";if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof u)return e=h(this.id),i.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=o[this.id.charCodeAt(t)];return i.cacheHexString&&(this.__id=e),e},i.prototype.get_inc=function(){return i.index=(i.index+1)%16777215},i.prototype.getInc=function(){return this.get_inc()},i.prototype.generate=function(e){"number"!==typeof e&&(e=~~(Date.now()/1e3));var s=("undefined"===typeof n||1===n.pid?Math.floor(1e5*Math.random()):n.pid)%65535,r=this.get_inc(),i=new t(12);return i[3]=255&e,i[2]=e>>8&255,i[1]=e>>16&255,i[0]=e>>24&255,i[6]=255&a,i[5]=a>>8&255,i[4]=a>>16&255,i[8]=255&s,i[7]=s>>8&255,i[11]=255&r,i[10]=r>>8&255,i[9]=r>>16&255,i},i.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString("string"===typeof e?e:"hex"):this.toHexString()},i.prototype.inspect=i.prototype.toString,i.prototype.toJSON=function(){return this.toHexString()},i.prototype.equals=function(e){return e instanceof i?this.toString()===e.toString():"string"===typeof e&&i.isValid(e)&&12===e.length&&this.id instanceof u?e===this.id.toString("binary"):"string"===typeof e&&i.isValid(e)&&24===e.length?e.toLowerCase()===this.toHexString():"string"===typeof e&&i.isValid(e)&&12===e.length?e===this.id:!(null==e||!(e instanceof i||e.toHexString))&&e.toHexString()===this.toHexString()},i.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(1e3*Math.floor(t)),e},i.index=~~(16777215*Math.random()),i.createPk=function(){return new i},i.createFromTime=function(e){var n=new t([0,0,0,0,0,0,0,0,0,0,0,0]);return n[3]=255&e,n[2]=e>>8&255,n[1]=e>>16&255,n[0]=e>>24&255,new i(n)};var l=[];for(c=0;c<10;)l[48+c]=c++;for(;c<16;)l[55+c]=l[87+c]=c++;var u=t,h=function(e){return e.toString("hex")};i.createFromHexString=function(e){if("undefined"===typeof e||null!=e&&24!==e.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r)return new i(new t(e,"hex"));for(var n=new u(12),a=0,s=0;s<24;)n[a++]=l[e.charCodeAt(s++)]<<4|l[e.charCodeAt(s++)];return new i(n)},i.isValid=function(e){return null!=e&&("number"===typeof e||("string"===typeof e?12===e.length||24===e.length&&s.test(e):e instanceof i||(e instanceof u||!!e.toHexString&&(12===e.id.length||24===e.id.length&&s.test(e.id)))))},Object.defineProperty(i.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),e.exports=i,e.exports.ObjectID=i,e.exports.ObjectId=i}).call(this,n(52).Buffer,n(19))},25:function(e,t){e.exports="data:image/png;base64,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"},26:function(e,t){e.exports="data:image/png;base64,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"},27:function(e,t){e.exports="data:image/png;base64,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"},30:function(e,t,n){e.exports=n(57)},35:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(24),i=n.n(r),o=(n(35),n(3)),c=n(4),l=n(2),u=n(8),h=n(7),g=n(6),d=n(1),m=n.n(d),f=n(10),v=n.n(f),p="ws://".concat("104.211.213.174"),A="http://".concat("104.211.213.174"),C=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="".concat(A,"/").concat(e);return v.a.get(n,t)}},{key:"post",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{headers:{"Content-Type":"application/json"}},a="".concat(A,"/").concat(e);return v.a.post(a,t,n)}}]),e}(),E=function(){function e(t){Object(o.a)(this,e),this.store=t,this.ws=null,this.isConnected=!1,this.connect(),this.reconnect()}return Object(c.a)(e,[{key:"reconnect",value:function(){var e=this,t=this.store;window.setInterval((function(){t.getCurrentUser()&&!e.isConnected&&e.connect()}),3e3)}},{key:"decodeMessage",value:function(e){var t={};if(e)try{t=JSON.parse(e)}catch(n){console.log(n)}return t}},{key:"readMessage",value:function(e){var t=this.store,n=t.getCurrentUser(),a=m.a.toString(m.a.get(n,"_id")),s=this.decodeMessage(e),r=m.a.get(s,"action",""),i=m.a.get(s,"payload","");switch(r){case"user_offline":this.onUpdateUserStatus(i,!1);break;case"user_online":this.onUpdateUserStatus(i,!0);break;case"message_added":var o=t.getActiveChannel(),c=m.a.get(o,"_id")!==m.a.get(i,"channelId")&&a!==m.a.get(i,"userId");this.onAddMessage(i,c);break;case"channel_added":this.onAddChannel(i)}}},{key:"onUpdateUserStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.store;n.users=n.users.update(e,(function(e){return e&&(e.online=t),e})),n.update()}},{key:"onAddMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.store,a=n.getCurrentUser(),s=m.a.toString(m.a.get(a,"_id")),r=m.a.get(e,"user");r=n.addUserToCache(r);var i={_id:e._id,body:m.a.get(e,"body",""),userId:m.a.get(e,"userId"),channelId:m.a.get(e,"channelId"),created:m.a.get(e,"created",new Date),me:s===m.a.toString(m.a.get(e,"userId")),user:r};n.setMessage(i,t)}},{key:"onAddChannel",value:function(e){var t=this,n=this.store,a=m.a.toString(m.a.get(e,"_id")),s="".concat(e.userId),r=m.a.get(e,"users",[]),i={_id:a,title:m.a.get(e,"title",""),isNew:!1,lastMessage:m.a.get(e,"lastMessage"),members:new g.a,messages:new g.a,userId:s,created:new Date};m.a.each(r,(function(e){var n="".concat(e._id);t.store.addUserToCache(e),i.members=i.members.set(n,!0)})),n.messages.filter((function(e){return m.a.toString(e.channelId)===a})).forEach((function(e){var t=m.a.toString(m.a.get(e,"_id"));i.messages=i.messages.set(t,!0)})),n.addChannel(a,i)}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.isConnected;if(this.ws&&t){var n=JSON.stringify(e);this.ws.send(n)}}},{key:"authentication",value:function(){var e=this.store.getUserTokenId();if(e){var t={action:"auth",payload:"".concat(e)};this.send(t)}}},{key:"connect",value:function(){var e=this,t=new WebSocket(p);this.ws=t,t.onopen=function(){e.isConnected=!0,e.authentication(),t.onmessage=function(t){e.readMessage(m.a.get(t,"data"))}},t.onclose=function(){e.isConnected=!1,e.store.update()},t.onerror=function(){e.isConnected=!1,e.store.update()}}}]),e}(),b=function(){function e(t){Object(o.a)(this,e),this.app=t,this.service=new C,this.messages=new g.a,this.channels=new g.a,this.activeChannelId=null,this.token=this.getTokenFromLocalStorage(),this.user=null,this.users=new g.a,this.search={users:new g.a},this.realtime=new E(this),this.fetchUserChannels()}return Object(c.a)(e,[{key:"updateUserOnLoad",value:function(){this.user=this.getUserFromLocalStorage()}},{key:"isConnected",value:function(){return this.realtime.isConnected}},{key:"fetchUserChannels",value:function(){var e=this,t=this.getUserTokenId();if(t){var n={headers:{authorization:t}};this.service.get("api/me/channels",n).then((function(t){var n=t.data;m.a.each(n,(function(t){e.realtime.onAddChannel(t)}));var a=m.a.get(n,"[0]._id",null);e.fetchChannelMessages(a)})).catch((function(e){console.log("Error in fetching user channels!")}))}}},{key:"addUserToCache",value:function(e){e.avatar=this.loadUserAvatar(e);var t=m.a.toString(e._id);return this.users=this.users.set(t,e),e}},{key:"getUserTokenId",value:function(){return m.a.get(this.token,"_id",null)}},{key:"loadUserAvatar",value:function(e){var t=m.a.get(e,"_id");return"https://api.adorable.io/avatars/100/".concat(t,".png")}},{key:"startSearchUsers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={search:t};this.search.users=this.search.users.clear(),this.service.post("api/users/search",n).then((function(t){var n=m.a.get(t,"data",[]);m.a.each(n,(function(t){t.avatar=e.loadUserAvatar(t);var n=m.a.toString(t._id);e.users=e.users.set(n,t),e.search.users=e.search.users.set(n,t)})),e.update()})).catch((function(e){console.log("Error in Searching: ",e)}))}},{key:"setUserToken",value:function(e){if(!e)return this.localStorage.removeItem("token"),void(this.token=null);this.token=e,localStorage.setItem("token",JSON.stringify(e))}},{key:"clearCacheData",value:function(){this.channels=this.channels.clear(),this.messages=this.messages.clear(),this.users=this.users.clear()}},{key:"signOut",value:function(){var e=m.a.toString(m.a.get(this.user,"_id",null)),t={headers:{authorization:m.a.get(this.token,"_id",null)}};this.service.get("api/me/logout",t),this.user=null,localStorage.removeItem("me"),localStorage.removeItem("token"),this.clearCacheData(),e&&(this.users=this.users.remove(e)),this.update()}},{key:"getTokenFromLocalStorage",value:function(){if(this.token)return this.token;var e=null,t=localStorage.getItem("token");if(t)try{e=JSON.parse(t)}catch(n){console.log(n)}return e}},{key:"getUserFromLocalStorage",value:function(){var e=this,t=null,n=localStorage.getItem("me");try{t=JSON.parse(n)}catch(r){console.log(r)}if(t){var a=this.getTokenFromLocalStorage(),s={headers:{authorization:m.a.get(a,"_id")}};this.service.get("api/users/me",s).then((function(t){var n=t.data,a=m.a.get(n,"user");e.setCurrentUser(a),e.setUserToken(n)})).catch((function(t){e.signOut()}))}return t}},{key:"setCurrentUser",value:function(e){if(e.avatar=this.loadUserAvatar(e),this.user=e,e){localStorage.setItem("me",JSON.stringify(e));var t="".concat(e._id);this.users=this.users.set(t,e),this.update()}}},{key:"register",value:function(e){var t=this;return new Promise((function(n,a){t.service.post("api/users",e).then((function(e){return n(e.data)})).catch((function(e){return a("Error Creating Account!")}))}))}},{key:"login",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=m.a.toLower(t),s={email:a,password:n};return new Promise((function(t,n){e.service.post("api/users/login",s).then((function(t){var n=m.a.get(t,"data"),a=m.a.get(n,"user");e.setCurrentUser(a),e.setUserToken(n),e.realtime.connect(),e.fetchUserChannels()})).catch((function(e){var t=m.a.get(e,"response.data.error.message","Login Error!");return n(t)}))}))}},{key:"removeMemberFromChannel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&t){var n=m.a.get(t,"_id"),a=m.a.get(e,"_id");e.members=e.members.remove(n),this.channels=this.channels.set(a,e),this.update()}}},{key:"addUserToChannel",value:function(e,t){var n=this.channels.get(e);n&&(n.members=n.members.set(t,!0),this.channels=this.channels.set(e,n),this.update())}},{key:"getSearchUsers",value:function(){return this.search.users.valueSeq()}},{key:"getCurrentUser",value:function(){return this.user}},{key:"fetchChannelMessages",value:function(e){var t=this,n=this.channels.get(e);if(n&&!m.a.get(n,"isFetchedMessages")){var a={headers:{authorization:m.a.get(this.token,"_id")}};this.service.get("api/channels/".concat(e,"/messages"),a).then((function(a){n.isFetchedMessages=!0;var s=a.data;m.a.each(s,(function(e){t.realtime.onAddMessage(e)})),t.channels=t.channels.set(e,n)})).catch((function(e){console.log("Error in Fetching Messages from Channel! ",e)}))}}},{key:"setActiveChannelId",value:function(e){this.activeChannelId=e,this.fetchChannelMessages(e),this.update()}},{key:"getActiveChannel",value:function(){return this.activeChannelId?this.channels.get(this.activeChannelId):this.channels.first()}},{key:"setMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=m.a.toString(m.a.get(e,"_id"));this.messages=this.messages.set(a,e);var s=m.a.toString(e.channelId),r=this.channels.get(s);r?(r.messages=r.messages.set(a,!0),r.lastMessage=m.a.get(e,"body",""),r.notify=n,this.channels=this.channels.set(s,r)):this.service.get("api/channels/".concat(s)).then((function(e){var n=m.a.get(e,"data");t.realtime.onAddChannel(n)})),this.update()}},{key:"addMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getCurrentUser();t.user=n,this.messages=this.messages.set(e,t);var a=m.a.get(t,"channelId");if(a){var s=this.channels.get(a);s.lastMessage=m.a.get(t,"body","");var r={action:"create_channel",payload:s};this.realtime.send(r),this.realtime.send({action:"create_message",payload:t}),s.messages=s.messages.set(e,!0),s.isNew=!1,this.channels=this.channels.set(a,s)}this.update()}},{key:"getMessages",value:function(){return this.messages.valueSeq()}},{key:"getMessagesFromChannel",value:function(e){var t=this,n=new g.a;return e&&e.messages.forEach((function(e,a){var s=t.messages.get(a);n=n.set(a,s)})),n.valueSeq()}},{key:"getMembersFromChannel",value:function(e){var t=this,n=new g.a;return e&&e.members.forEach((function(e,a){var s="".concat(a),r=t.users.get(s),i=t.getCurrentUser();m.a.get(i,"_id")!==m.a.get(r,"_id")&&(n=n.set(a,r))})),n.valueSeq()}},{key:"onCreateNewChannel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m.a.get(e,"_id");this.addChannel(t,e),this.setActiveChannelId(t)}},{key:"addChannel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.channels=this.channels.set("".concat(e),t),this.update()}},{key:"getChannels",value:function(){return this.channels=this.channels.sort((function(e,t){return e.updated<t.updated})),this.channels.valueSeq()}},{key:"update",value:function(){this.app.forceUpdate()}}]),e}(),y=n(9),w=n.n(y),k=n(25),S=n.n(k),O=n(26),x=n.n(O),U=n(11),j=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleOnClick=a.handleOnClick.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"handleOnClick",value:function(e){this.props.onSelect&&this.props.onSelect(e)}},{key:"render",value:function(){var e=this,t=this.props.store.getSearchUsers();return s.a.createElement("div",{className:"search-user"},s.a.createElement("div",{className:"user-list"},t.map((function(t,n){return s.a.createElement("div",{onClick:function(){return e.handleOnClick(t)},key:n,className:"user"},s.a.createElement("img",{src:m.a.get(t,"avatar"),alt:"..."}),s.a.createElement("h3",null,m.a.get(t,"name")))}))))}}]),n}(a.Component),N=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={message:null,isLogin:!0,user:{name:"",email:"",password:""}},a.onSubmit=a.onSubmit.bind(Object(l.a)(a)),a.onTextFieldChange=a.onTextFieldChange.bind(Object(l.a)(a)),a.onClickOutside=a.onClickOutside.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"onClickOutside",value:function(e){this.ref&&!this.ref.contains(e.target)&&this.props.onClose&&this.props.onClose()}},{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.onClickOutside)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.onClickOutside)}},{key:"onSubmit",value:function(e){var t=this,n=this.state,a=n.user,s=n.isLogin,r=this.props.store;e.preventDefault(),this.setState({message:null},(function(){s?r.login(a.email,a.password).then((function(e){t.props.onClose&&t.props.onClose()})).catch((function(e){t.setState({message:{body:e,type:"error"}})})):r.register(a).then((function(e){t.setState({message:{body:"Account Created!",type:"success"}},(function(){r.login(a.email,a.password).then((function(){t.props.onClose&&t.props.onClose()}))}))}))}))}},{key:"onTextFieldChange",value:function(e){var t=this.state.user;t[e.target.name]=e.target.value,this.setState({user:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.user,a=t.message,r=t.isLogin;return s.a.createElement("div",{className:"user-form",ref:function(t){return e.ref=t}},s.a.createElement("form",{onSubmit:this.onSubmit,method:"post"},a?s.a.createElement("p",{className:w()("login-message",m.a.get(a,"type"))},m.a.get(a,"body")):null,r?null:s.a.createElement("div",{className:"form-item"},s.a.createElement("label",null,"Name"),s.a.createElement("input",{onChange:this.onTextFieldChange,type:"text",value:m.a.get(n,"name",""),name:"name",placeholder:"Your Username"})),s.a.createElement("div",{className:"form-item"},s.a.createElement("label",null,"Email"),s.a.createElement("input",{value:m.a.get(n,"email"),onChange:this.onTextFieldChange,type:"email",name:"email",placeholder:"Email Address",autoComplete:"on"})),s.a.createElement("div",{className:"form-item"},s.a.createElement("label",null,"Password"),s.a.createElement("input",{value:m.a.get(n,"password"),onChange:this.onTextFieldChange,type:"password",name:"password",placeholder:"Password",autoComplete:"on"})),s.a.createElement("div",{className:"form-actions"},r?s.a.createElement("button",{onClick:function(){e.setState({isLogin:!1})},type:"button"},"Create Account"):null,s.a.createElement("button",{className:"primary",type:"submit"},r?"Sign In":"Create Account"))))}}]),n}(a.Component),B=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onClickOutside=a.onClickOutside.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"onClickOutside",value:function(e){this.ref&&!this.ref.contains(e.target)&&this.props.onClose&&this.props.onClose()}},{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.onClickOutside)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.onClickOutside)}},{key:"render",value:function(){var e=this,t=this.props.store,n=t.getCurrentUser();return s.a.createElement("div",{className:"user-menu",ref:function(t){return e.ref=t}},n?s.a.createElement("ul",{className:"menu"},s.a.createElement("li",null,s.a.createElement("button",{type:"button"},"Change Profile Picture")),s.a.createElement("li",null,s.a.createElement("button",{type:"button"},"Change Password")),s.a.createElement("li",null,s.a.createElement("button",{onClick:function(){e.props.onClose&&e.props.onClose(),t.signOut()},type:"button"},"Sign Out"))):null)}}]),n}(a.Component),M=n(27),Q=n.n(M),D=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={showUserForm:!1,showUserMenu:!1},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.store,n=t.getCurrentUser(),a=m.a.get(n,"avatar"),r=t.isConnected();return s.a.createElement("div",{className:"user-bar"},n?s.a.createElement("div",{onClick:function(){e.setState({showUserMenu:!0})},className:"profile-name"},s.a.createElement("p",{className:"profile-name-text"},m.a.get(n,"name")),s.a.createElement("span",{className:"conn-status"},s.a.createElement("p",{className:"conn-status-text"},"Status: ")," ",n&&!r?s.a.createElement("div",{className:"conn-status-reconnect"},"Disconnected"):s.a.createElement("div",{className:"conn-status-online"},"Online"))):s.a.createElement("button",{onClick:function(){e.setState({showUserForm:!0})},type:"button",className:"login-button"},"Sign in"),s.a.createElement("div",{onClick:function(){n?e.setState({showUserMenu:!0}):e.setState({showUserForm:!0})},className:"profile-image"},s.a.createElement("img",{src:a||Q.a,alt:"Avatar"})),!n&&this.state.showUserForm?s.a.createElement(N,{onClose:function(){e.setState({showUserForm:!1})},store:t}):null,this.state.showUserMenu?s.a.createElement(B,{store:t,onClose:function(){e.setState({showUserMenu:!1})}}):null)}}]),n}(a.Component),T=n(28),H=n.n(T),V=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={height:window.innerHeight,newMessage:"",searchUser:"",showSearchUser:!1},a._onResize=a._onResize.bind(Object(l.a)(a)),a.handleSend=a.handleSend.bind(Object(l.a)(a)),a.renderMessage=a.renderMessage.bind(Object(l.a)(a)),a.scrollToBottomMessage=a.scrollToBottomMessage.bind(Object(l.a)(a)),a._onCreateChannel=a._onCreateChannel.bind(Object(l.a)(a)),a.renderChannelTitle=a.renderChannelTitle.bind(Object(l.a)(a)),a.renderChannelAvatars=a.renderChannelAvatars.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"renderChannelAvatars",value:function(e){var t=this.props.store.getMembersFromChannel(e),n=t.size>4?4:t.size,a=t.map((function(e,t){return t<4?s.a.createElement("img",{key:t,src:m.a.get(e,"avatar"),alt:m.a.get(e,"name")}):null}));return s.a.createElement("div",{className:w()("channel-avatars","channel-avatars-".concat(n))},a)}},{key:"renderChannelTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return null;var t=this.props.store,n=t.getMembersFromChannel(e),a=[];n.forEach((function(e){var t=m.a.get(e,"name");a.push(t)}));var r=m.a.join(a,", ");return!r&&m.a.get(e,"isNew")&&(r="New Channel"),s.a.createElement("h2",null,r)}},{key:"_onCreateChannel",value:function(){var e=this.props.store,t=e.getCurrentUser(),n=m.a.get(t,"_id"),a={_id:(new U.ObjectID).toString(),title:"",lastMessage:"",members:new g.a,messages:new g.a,isNew:!0,userId:n,created:new Date};a.members=a.members.set(n,!0),e.onCreateNewChannel(a)}},{key:"scrollToBottomMessage",value:function(){this.messageRef&&(this.messageRef.scrollTop=this.messageRef.scrollHeight)}},{key:"renderMessage",value:function(e){var t=m.a.get(e,"body","");return m.a.split(t,"\n").map((function(e,t){return s.a.createElement("p",{key:t,dangerouslySetInnerHTML:{__html:e}})}))}},{key:"handleSend",value:function(){var e=this.state.newMessage,t=this.props.store;if(m.a.trim(e).length){var n=(new U.ObjectID).toString(),a=t.getActiveChannel(),s=m.a.get(a,"_id",null),r=t.getCurrentUser(),i={_id:n,channelId:s,body:e,userId:m.a.get(r,"_id"),me:!0};t.addMessage(n,i),this.setState({newMessage:""})}}},{key:"_onResize",value:function(){this.setState({height:window.innerHeight})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this._onResize)}},{key:"componentDidUpdate",value:function(){this.scrollToBottomMessage()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._onResize)}},{key:"render",value:function(){var e=this,t=this.props.store,n={height:this.state.height-50},a=t.getActiveChannel(),r=t.getMessagesFromChannel(a),i=t.getChannels(),o=t.getMembersFromChannel(a);return s.a.createElement("div",{className:"messenger"},s.a.createElement("div",{className:"messenger-header"},s.a.createElement("div",{className:"left"},s.a.createElement("h2",null,"ChatQube",s.a.createElement("sup",null,"BETA")),s.a.createElement("div",{onClick:this._onCreateChannel,className:"right-action"},s.a.createElement("button",null,s.a.createElement("img",{src:S.a,alt:"New Message"})))),s.a.createElement("div",{className:"middle"},m.a.get(a,"isNew")?s.a.createElement("div",{className:"toolbar"},s.a.createElement("label",null,"To:"),o.map((function(e,n){return s.a.createElement("span",{onClick:function(){t.removeMemberFromChannel(a,e)},key:n},m.a.get(e,"name"))})),s.a.createElement("input",{placeholder:"Type username...",onChange:function(n){var a=m.a.get(n,"target.value");e.setState({searchUser:a,showSearchUser:!0},(function(){t.startSearchUsers(a)}))},type:"text",value:this.state.searchUser}),this.state.showSearchUser?s.a.createElement(j,{onSelect:function(n){e.setState({showSearchUser:!1,searchUser:""},(function(){var e=m.a.get(n,"_id"),s=m.a.get(a,"_id");t.addUserToChannel(s,e)}))},store:t}):null):this.renderChannelTitle(a)),s.a.createElement("div",{className:"right"},s.a.createElement(D,{store:t}))),s.a.createElement("div",{style:n,className:"messenger-body"},s.a.createElement("div",{className:"messenger-sidebar-left"},s.a.createElement("div",{className:"channels"},i.map((function(n,r){return s.a.createElement("div",{onClick:function(e){t.setActiveChannelId(n._id)},key:n._id,className:w()("channel",{notify:!0===m.a.get(n,"notify")},{active:m.a.get(a,"_id")===m.a.get(n,"_id",null)})},s.a.createElement("div",{className:"user-image"},e.renderChannelAvatars(n)),s.a.createElement("div",{className:"channel-info"},e.renderChannelTitle(n),s.a.createElement("p",null,n.lastMessage)))})))),s.a.createElement("div",{className:"messenger-content"},s.a.createElement("div",{ref:function(t){return e.messageRef=t},className:"messages"},r.map((function(t,n){var a=m.a.get(t,"user");return s.a.createElement("div",{key:n,className:w()("message",{me:t.me})},s.a.createElement("div",{className:"message-user-image"},s.a.createElement("img",{src:m.a.get(a,"avatar"),alt:"Avatar"})),s.a.createElement("div",{className:"message-body"},s.a.createElement("div",{className:"message-author"},t.me?"You said:":m.a.get(t,"user.name","")+" says:"),s.a.createElement("div",{className:"message-text"},e.renderMessage(t))))}))),a&&o.size>0?s.a.createElement("div",{className:"message-input"},s.a.createElement("div",{className:"text-input"},s.a.createElement("textarea",{onKeyUp:function(t){"Enter"!==t.key||t.shiftKey||e.handleSend()},onChange:function(t){e.setState({newMessage:m.a.get(t,"target.value")})},value:this.state.newMessage,placeholder:"Type a message... (Shift + Enter for Newline)",name:"",id:"",cols:"30",rows:"10"})),s.a.createElement("div",{className:"actions"},s.a.createElement("button",{onClick:this.handleSend,className:"send"},s.a.createElement("img",{src:x.a,alt:"Send"})))):null),s.a.createElement("div",{className:"messenger-sidebar-right"},o.size>0?s.a.createElement("div",null,s.a.createElement("h2",{className:"title"},"Chat Members"),s.a.createElement("div",{className:"members"},o.map((function(e,t){var n=m.a.get(e,"online",!1);return s.a.createElement("div",{key:t,className:"member"},s.a.createElement("div",{className:"user-image"},s.a.createElement("img",{src:m.a.get(e,"avatar"),alt:"Avatar"}),s.a.createElement("span",{className:w()("user-status",{online:n})})),s.a.createElement("div",{className:"member-info"},s.a.createElement("h2",null,e.name," | ",s.a.createElement("span",{className:w()("user-status",{online:n})},n?"Online":"Offline")),s.a.createElement("p",null,"Joined: ",H()(e.created).fromNow())))})))):null,s.a.createElement("div",{className:"contact-email"},"Contact: ",s.a.createElement("a",{href:"mailto:chatqube@gmail.com"},"chatqube@gmail.com")))))}}]),n}(a.Component),P=n(29),J=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={store:new b(Object(l.a)(a))},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.state.store.updateUserOnLoad()}},{key:"render",value:function(){if(P.isMobile)return s.a.createElement("div",{className:"mobile-app"},s.a.createElement("h1",{className:"mobile-app-heading"},"Mobile Version is Coming Soon!"),s.a.createElement("p",{className:"mobile-app-text"},"To use ",s.a.createElement("b",null,"ChatQube"),", open this web application on a PC."));var e=this.state.store;return s.a.createElement("div",{className:"messenger-wrapper"},s.a.createElement(V,{store:e}))}}]),n}(a.Component);i.a.render(s.a.createElement(J,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.5be2fe9f.chunk.js.map